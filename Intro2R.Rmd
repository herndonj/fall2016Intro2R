---
title: "Intro to R by Data & Visualization Services"
author: "Joel Herndon & John Little"
date: "9/12/2016"
output: 
  html_document:
    toc: true
    toc_float: true
    number_sections: false
    theme: readable
    highlight: pygments
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Intro to R


## Housekeeping

#### Joel - PPT

1. Welcome
2. What is r
3. What is [RStudio](https://www.rstudio.com/)
4. What is a Project
5. What is [Docker](https://vm-manage.oit.duke.edu/containers/rstudio)

```{r load-packages}
require(rmarkdown)
require(dplyr)
require(ggplot2)
require(readr)
```

## Data Management

#### John

### Load Data
```{r get data}
cars <- read_csv("cars.csv")
```

#### NOTES

* ENVIRONMENT PANE: Import Dataset 
    * FILES PANE: Files--Upload
* `readxl`


### View your data in a grid

```{r}
View(cars)
```

#### Notes

* An exploratory convenience, not "reproducible" in the sense of generating a report or leaving a trail of your work
* Environment Pane has information about data objects
* View output has sorting 



### Structure of Data Object

```{r structure}
str(cars)
```

#### Similar Commands
* `tbl_df()`    # tibbles are modernized data frames
* `dim()`       # dimensions
* `class()`     # data type 

## EXERCISE, Part One

1. Student_Assignments.Rmd::PART ONE
**Loading Data**

## Data Reshaping 

#### John

dplyr is a widely adopted r package and makes it easy to use English verbs to reshape your data.

### Arrange

```{r arrange}
arrange(cars, cyl, desc(mpg), desc(hp), wt)
```

### Filter

```{r filter}
sixcyls <- filter(cars, cyl == 6)
```

### Mutate

Add columns
```{r mutate}
sixcyls <- mutate(sixcyls, dispWt = disp / wt)
```


### Select
```{r select}
sixcyls <- select(sixcyls, mpg:wt)
```


### Count
```{r count}
tbl_df(sixcyls) %>% 
  count(hp)
```


## EXERCISE, Part 2

2. Student_Assignments.Rmd::PART TWO
**Data Management**

1. `arrange()`
2. `filter()`
3. `mutate()`
4. `select()`
5. `count()`

#### Joel

### Put it all together
```{r alltogether}

mutate(cars) %>% 
  filter(cyl >= 4, cyl <= 6) %>% 
  select(makeModel, mpg:wt) %>%
  mutate(dispWt = disp / wt) %>% 
  arrange(desc(mpg), wt)
```


#### John

## Basic Vis

When in the data exploratory phase, you can quickly generate very basic visualizations with minimal effort.  Your visualizations then appear in the Viewer Pane.  While you may not want to share these visualizations, the simplicity of generating quick histograms can help you understand your data as you begin thinking about your analysis.

Type these commands into your console.

To generate

* Histogram:  `hist(cars$mpg)`
* Scatterplot: `plot(cars$wt, cars$mpg)`
* Barplot:  `barplot(table(cars$cyl))`


## Better Vis via ggplot2

### ggplot2 Scatter Plot
```{r ggplot}
ggplot(cars, aes(x = wt, y = mpg)) +
  geom_point(shape = 1) + 
  geom_smooth(method = lm)
```

[more info on ggplot scatterplots](http://www.cookbook-r.com/Graphs/Scatterplots_(ggplot2)/)


### ggplot2 Bar Graph
```{r ggbarplot}
ggplot(data=cars, aes(x = cyl)) +
    geom_bar(stat="bin")
```

```{r ggbarplot2}
mutate(cars, cyl = factor(cyl, labels = c("four","six","eight"))) %>% 
  ggplot(aes(x = cyl)) +
    geom_bar(stat="count")
```


[More Information on ggplot bar and line graphs](http://www.cookbook-r.com/Graphs/Bar_and_line_graphs_(ggplot2)/)

### ggplot2 Histogram
```{r gghist}
ggplot(cars, aes(x = mpg)) +
    geom_histogram(binwidth=1, colour="black", fill="white")
```

[More info on ggplot histograms](http://www.cookbook-r.com/Graphs/Plotting_distributions_(ggplot2))

### ggplot2 Line graph
```{r linegraph}
ggplot(data=cars, aes(x = mpg, y = wt, group = cyl, colour = cyl)) +
    geom_line() #+
    #geom_point()
```

[More info on line graphs](http://www.cookbook-r.com/Graphs/Bar_and_line_graphs_(ggplot2)/)

